name: Test-Logger

on: [push, pull_request]

env:
  imageName: img_system_logs
  containerName: ctr_system_logs

jobs:
  test-pipeline:
    runs-on: ubuntu-latest
    steps:
    - name: Log-in to Docker Hub
      uses: docker/login-action@v1
      with:
        username: ${{ secrets.DOCKERHUB_USERNAME }}
        password: ${{ secrets.DOCKERHUB_TOKEN }}
    - name: Checkout
      uses: actions/checkout@v2
    - name: Unit tests for log-reader 
      run: |
        docker pull basavyr/ubuntu:latest
        docker build . -t ${{env.imageName}}
        docker container create --name ${{env.containerName}} ${{env.imageName}}
        docker start -i ${{env.containerName}}
      # run: |
      #   docker pull basavyr/ubuntu:latest
      #   docker build . -t pypy
      #   docker run pypy